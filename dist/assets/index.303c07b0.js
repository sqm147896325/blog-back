var K=Object.defineProperty;var I=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var g=(e,t,s)=>t in e?K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,b=(e,t)=>{for(var s in t||(t={}))W.call(t,s)&&g(e,s,t[s]);if(I)for(var s of I(t))X.call(t,s)&&g(e,s,t[s]);return e};var M=(e,t,s)=>(g(e,typeof t!="symbol"?t+"":t,s),s);import{x as J,a as Y,m as E,V as m,b as f,c as S,e as $,E as Q,d as Z}from"./vendor.53200e5a.js";const ee=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function s(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=s(i);fetch(i.href,o)}};ee();(function(){var e=console.log;console.log=function(t){typeof arguments[0]=="string"&&arguments.length===1&&(arguments[0]="%c %c"+arguments[0],arguments[1]="color: #4e72b8;background-image: url(https://img.shields.io/badge/LS-%E6%97%A5%E5%BF%97-brightgreen?style=plastic); padding: 3px 25px; margin: 0px 8px 0px 0px; background-size: contain; background-repeat: no-repeat;",arguments[2]="color: #F56C6C; font-weight: bold",arguments.length=3),e.apply(console,arguments)}})();var te=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},se=[];function c(e,t,s,n,i,o,r,_){var a=typeof e=="function"?e.options:e;t&&(a.render=t,a.staticRenderFns=s,a._compiled=!0),n&&(a.functional=!0),o&&(a._scopeId="data-v-"+o);var d;if(r?(d=function(u){u=u||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!u&&typeof __VUE_SSR_CONTEXT__!="undefined"&&(u=__VUE_SSR_CONTEXT__),i&&i.call(this,u),u&&u._registeredComponents&&u._registeredComponents.add(r)},a._ssrRegister=d):i&&(d=_?function(){i.call(this,(a.functional?this.parent:this).$root.$options.shadowRoot)}:i),d)if(a.functional){a._injectStyles=d;var q=a.render;a.render=function(z,w){return d.call(w),q(z,w)}}else{var x=a.beforeCreate;a.beforeCreate=x?[].concat(x,d):[d]}return{exports:e,options:a}}const ne={name:"App"},A={};var ie=c(ne,te,se,!1,oe,null,null,null);function oe(e){for(let t in A)this[t]=A[t]}var re=function(){return ie.exports}();const ae="modulepreload",O={},ce="/page/back/",l=function(t,s){return!s||s.length===0?t():Promise.all(s.map(n=>{if(n=`${ce}${n}`,n in O)return;O[n]=!0;const i=n.endsWith(".css"),o=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${o}`))return;const r=document.createElement("link");if(r.rel=i?"stylesheet":ae,i||(r.as="script",r.crossOrigin=""),r.href=n,document.head.appendChild(r),i)return new Promise((_,a)=>{r.addEventListener("load",_),r.addEventListener("error",a)})})).then(()=>t())};var le=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",e._l(e.routesMenu,function(n){return s("div",{key:n.name,staticClass:"aside-item"},[typeof n.children=="undefined"?s("el-menu-item",{attrs:{index:e.getPath(n)},on:{click:function(i){return e.chooseMenu(n)}}},[s("i",{class:n.icon||"el-icon-menu"}),s("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(n.name))])]):n.children.length==1?s("el-menu-item",{attrs:{index:e.getPath(n)},on:{click:function(i){return e.chooseMenu(n.children[0])}}},[s("i",{class:n.children[0].icon||"el-icon-menu"}),s("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(n.children[0].name))])]):s("el-submenu",{attrs:{index:n.name},on:{click:function(i){return e.chooseMenu(n)}}},[s("template",{slot:"title"},[s("i",{class:n.icon||"el-icon-menu"}),s("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(n.name))])]),s("aside-item",{attrs:{itemMenu:n.children}})],2)],1)}),0)},ue=[];const me={name:"AsideItem",props:{itemMenu:{type:Array,default:()=>[]}},data(){return{routesMenu:[]}},mounted(){this.init()},methods:{init(){this.itemMenu.length==0?(this.routesMenu=this.$store.state.aside.menu,this.routesMenu=this.routesMenu.filter(e=>{var t;return!!(((t=this.$store.state.user.userInfo.power)==null?void 0:t.includes(e.name))||e.name=="dashboard")})):(this.routesMenu=this.itemMenu,this.routesMenu=this.routesMenu.filter(e=>{var t;return!!((t=this.$store.state.user.userInfo.power)==null?void 0:t.includes(e.name))}))},getPath(e){let t=e.path;return e.meta&&(t=e.meta.defaultPath),t},chooseMenu(e){let t=this.getPath(e);this.$store.commit("aside/setActiveMenu",t)}}},R={};var de=c(me,le,ue,!1,he,"4245a026",null,null);function he(e){for(let t in R)this[t]=R[t]}var _e=function(){return de.exports}(),pe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"aside"},[s("el-aside",{staticClass:"main",attrs:{width:"100%"}},[s("el-menu",{staticClass:"menu",attrs:{"default-active":e.defaultActive(),collapse:e.collapse(),router:!0},on:{open:e.handleOpen}},[s("aside-item")],1)],1)],1)},fe=[];const ve={name:"Aside",components:{AsideItem:_e},data(){return{}},mounted(){},methods:{handleOpen(e,t){console.log(e,t)},handleClose(e,t){console.log(e,t)},defaultActive(){return this.$store.state.aside.activeMenu},collapse(){return this.$store.state.aside.asideClose}}},L={};var ge=c(ve,pe,fe,!1,be,"1232e348",null,null);function be(e){for(let t in L)this[t]=L[t]}var $e=function(){return ge.exports}();var ye=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"sys-msg"},[s("div",{ref:"xterm",attrs:{id:"xterm"}})])},ke=[];const Ce={name:"SysMsg",data(){return{term:null,fitAddon:null,sshState:!1,historyCmd:[],historyIndex:0,temCmdStr:[],temCmdIndex:0,symbol:"$ > ",ins:0}},computed:{pipAfter(){return this.temCmdStr.slice(this.temCmdIndex)}},mounted(){this.initTerm()},beforeDestroy(){this.socket.term.close(),this.term&&this.term.dispose()},methods:{initTerm(){const e=new J.exports.Terminal({cursorBlink:!0,cursorStyle:"bar",scrollback:100});this.term=e;const t=new Y.exports.FitAddon;this.term.loadAddon(t),this.fitAddon=t,e.open(this.$refs.xterm),e.focus(),this.term.onData(s=>{this.sshState?this.$socket.term.emit("res",s):this.keyInput(s)}),this.initGreet()},initGreet(){this.term.write("*** \uFF08^0^\uFF09 ***"),this.keyEnter()},keyInput(e){if(e.includes(";"))return console.log("\u6682\u65F6\u4E0D\u652F\u6301\u7EC4\u5408\u952E"),!1;if(e==="\r")this.keyEnter();else if(e==="\x7F")this.keyBackspace();else if(e==="[A")this.keyUp();else if(e==="[B")this.keyDown();else if(e==="[C")this.keyRight();else if(e==="[D")this.keyLeft();else{let t=[],s=[];this.pipAfter.forEach(i=>{t.push(i),s.push("\b")});const n=e+t.join("")+s.join("");this.term.write(n),this.temCmdStr.splice(this.temCmdIndex,this.ins,e),this.temCmdIndex++}},keyEnter(){this.cmd(this.temCmdStr.join("")),this.term.writeln(""),this.term.write(this.symbol),this.historyCmd.push(this.temCmdStr),this.historyIndex++,this.temCmdStr=[],this.temCmdIndex=0},keyBackspace(){if(this.temCmdIndex===0)return!1;let e=[],t=[];this.pipAfter.forEach(n=>{e.push(n),t.push("\b")});const s="\b"+e.join("")+" \b"+t.join("");this.term.write(s),this.temCmdIndex--,this.temCmdStr.splice(this.temCmdIndex,this.ins+1)},keyUp(){this.historyIndex!==0&&this.historyIndex--,this.term.write(this.historyCmd[this.historyIndex].join(""))},keyDown(){this.historyIndex<this.historyCmd.length&&this.historyIndex++,this.term.write(this.historyCmd[this.historyIndex].join(""))},keyRight(){if(this.temCmdIndex>=this.temCmdStr.length)return!1;this.temCmdIndex++,this.term.write("[C")},keyLeft(){if(this.temCmdIndex<=0)return!1;this.temCmdIndex--,this.term.write("[D")},getColsAndRows(e){return e=e||document.getElementById("xterm"),{rows:parseInt((e.clientHeight-0)/18),cols:10}},resizeTerm(){this.fitAddon.fit(),this.term.scrollToBottom()},cmd(e){console.log(e)}},sockets:{term:{res(e){this.term.write(e.toString())}}}},j={};var xe=c(Ce,ye,ke,!1,we,"4d25955e",null,null);function we(e){for(let t in j)this[t]=j[t]}var Ie=function(){return xe.exports}(),Me=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"user-msg"},[s("div",{staticClass:"msg-list"},e._l(e.userList,function(n,i){return s("div",{key:i,staticClass:"list-item",class:e.chooseIndex===i?"item-choose":"",on:{click:function(o){return e.chooseItem(n,i)}}},[s("div",{staticClass:"item-img"},[e._v(e._s(n.img))]),s("div",{staticClass:"item-content"},[s("div",{staticClass:"title"},[s("div",{staticClass:"title-name"},[e._v(e._s(n.name))]),s("div",{staticClass:"title-time"},[e._v(e._s(n.time))])]),s("div",{staticClass:"info"},[s("div",{staticClass:"info-content"},[e._v(e._s(n.content))]),s("div",{staticClass:"info-num"},[e._v(e._s(n.num))])])])])}),0),e._m(0)])},Ee=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"msg-main"},[s("div",{staticClass:"main-content"}),s("div",{staticClass:"main-input"})])}];const Se={data(){return{userList:[{img:"url",name:"test",time:"2021-10-23",content:"test",num:5,userId:1e4},{img:"url",name:"test",time:"2021-10-23",content:"test",num:5,userId:1e4},{img:"url",name:"test",time:"2021-10-23",content:"test",num:5,userId:1e4},{img:"url",name:"test",time:"2021-10-23",content:"test",num:5,userId:1e4},{img:"url",name:"test",time:"2021-10-23",content:"test",num:5,userId:1e4},{img:"url",name:"test",time:"2021-10-23",content:"test",num:5,userId:1e4},{img:"url",name:"test",time:"2021-10-23",content:"test",num:5,userId:1e4},{img:"url",name:"test",time:"2021-10-23",content:"test",num:5,userId:1e4},{img:"url",name:"test",time:"2021-10-23",content:"test",num:5,userId:1e4},{img:"url",name:"test",time:"2021-10-23",content:"test",num:5,userId:1e4},{img:"url",name:"test",time:"2021-10-23",content:"test",num:5,userId:1e4}],chooseIndex:""}},methods:{chooseItem(e,t){this.chooseIndex=t}}},T={};var Ae=c(Se,Me,Ee,!1,Oe,"9c2bf6d2",null,null);function Oe(e){for(let t in T)this[t]=T[t]}var Re=function(){return Ae.exports}(),Le=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div")},je=[];const Te={},D={};var De=c(Te,Le,je,!1,Ve,null,null,null);function Ve(e){for(let t in D)this[t]=D[t]}var Ne=function(){return De.exports}(),Pe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div")},Fe=[];const Ge={},V={};var Ue=c(Ge,Pe,Fe,!1,He,null,null,null);function He(e){for(let t in V)this[t]=V[t]}var Be=function(){return Ue.exports}(),qe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-dialog",e._g(e._b({attrs:{title:"\u6D88\u606F\u63A7\u5236\u53F0",width:"80%",top:"5vh","close-on-click-modal":!1}},"el-dialog",e.$attrs,!1),e.$listeners),[s("div",{staticClass:"message-content"},[s("el-tabs",{attrs:{stretch:!0}},[s("el-tab-pane",[s("span",{attrs:{slot:"label"},slot:"label"},[s("i",{staticClass:"el-icon-cpu"}),e._v("\u7CFB\u7EDF")]),s("SysMsg")],1),s("el-tab-pane",[s("span",{attrs:{slot:"label"},slot:"label"},[s("i",{staticClass:"el-icon-user"}),e._v("\u7528\u6237")]),s("UserMsg")],1),s("el-tab-pane",[s("span",{attrs:{slot:"label"},slot:"label"},[s("i",{staticClass:"el-icon-bell"}),e._v("\u901A\u77E5")]),s("NoticeMsg")],1),s("el-tab-pane",[s("span",{attrs:{slot:"label"},slot:"label"},[s("i",{staticClass:"el-icon-connection"}),e._v("\u804A\u5929\u5BA4")]),s("RoomMsg")],1)],1)],1)])},ze=[];const Ke={components:{SysMsg:Ie,UserMsg:Re,NoticeMsg:Ne,RoomMsg:Be},data(){return{}},mounted(){},methods:{}},N={};var We=c(Ke,qe,ze,!1,Xe,"d3bf8108",null,null);function Xe(e){for(let t in N)this[t]=N[t]}var Je=function(){return We.exports}(),Ye=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e._l(e.dynamicTags,function(n){return s("el-tag",{key:n,attrs:{closable:"","disable-transitions":!1},on:{close:function(i){return e.handleClose(n)}}},[e._v(" "+e._s(n)+" ")])}),e.inputVisible?s("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:e.handleInputConfirm},nativeOn:{keyup:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.handleInputConfirm.apply(null,arguments)}},model:{value:e.inputValue,callback:function(n){e.inputValue=n},expression:"inputValue"}}):s("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:e.showInput}},[e._v("+ \u65B0\u9875\u7B7E")])],2)},Qe=[];const Ze={name:"HeadTag",data(){return{dynamicTags:["\u6807\u7B7E\u4E00","\u6807\u7B7E\u4E8C","\u6807\u7B7E\u4E09"],inputVisible:!1,inputValue:""}},methods:{handleClose(e){this.dynamicTags.splice(this.dynamicTags.indexOf(e),1)},showInput(){this.inputVisible=!0,this.$nextTick(e=>{this.$refs.saveTagInput.$refs.input.focus()})},handleInputConfirm(){let e=this.inputValue;e&&this.dynamicTags.push(e),this.inputVisible=!1,this.inputValue=""}}},P={};var et=c(Ze,Ye,Qe,!1,tt,"10e88673",null,null);function tt(e){for(let t in P)this[t]=P[t]}var st=function(){return et.exports}(),nt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"header"},[s("el-header",{staticClass:"main"},[s("i",{class:e.collapse()?"el-icon-s-unfold":"el-icon-s-fold",on:{click:e.setOpen}}),s("el-breadcrumb",{staticClass:"breadcrumb",attrs:{separator:"/"}},[s("el-breadcrumb-item",{attrs:{to:"/"}},[e._v("\u9996\u9875")]),e._l(e.matched,function(n){return s("el-breadcrumb-item",{key:n.path,attrs:{to:n.path}},[e._v(e._s(n.name))])})],2),s("div",{staticClass:"main-container"},[s("div",{staticClass:"tag-container"},[s("HeadTag")],1),s("div",{staticClass:"main-left"},[s("el-badge",{staticClass:"left-msg",attrs:{hidden:!e.msgNum||e.msgVisible,value:e.msgNum,max:99}},[s("i",{staticClass:"msg-icon",class:e.msgNum?"el-icon-chat-line-round":"el-icon-chat-round",on:{click:e.msgOpen}})]),s("el-dropdown",{staticClass:"left-dropdown",on:{command:e.headMenu}},[s("span",{staticClass:"dropdown-head"},[s("el-avatar",{attrs:{shape:"square",size:36}},[e._v(" user ")]),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})],1),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.option,function(n,i){return s("el-dropdown-item",{key:i,attrs:{command:n.value}},[e._v(e._s(n.lable))])}),1)],1)],1)])],1),s("Message",{staticClass:"messge-dialog",attrs:{visible:e.msgVisible},on:{"update:visible":function(n){e.msgVisible=n}}})],1)},it=[];const ot={name:"Header",components:{Message:Je,HeadTag:st},data(){return{matched:[],option:[{value:-1,lable:"\u767B\u51FA"},{value:1,lable:"\u4E2A\u4EBA\u4E2D\u5FC3"}],msgNum:0,msgVisible:!1,msgArr:[]}},mounted(){this.init()},watch:{$route(){this.routeChange()}},sockets:{msg:{res(e){this.debug.socket&&console.log("res",e.dataInfo)},"233"(e){this.debug.socket&&console.log("233",e),this.$msgTip("success",e)},"250"(e){this.debug.socket&&console.log("250",e),this.$msgTip("error",e,0)},reconnect(){this.debug.socket&&console.log("reconnect \u91CD\u65B0\u8FDE\u63A5"),this.sokcet("msg","init")},disconnect(){this.debug.socket&&console.log("\u65AD\u5F00\u8FDE\u63A5")}}},methods:{init(){this.sokcet("msg","init"),this.routeChange()},routeChange(){this.matched=this.$route.matched.filter(e=>e.name!="dashboard")},setOpen(){this.$store.commit("aside/setOpen",!this.$store.state.aside.asideClose)},collapse(){return this.$store.state.aside.asideClose},msgOpen(){this.msgVisible=!0},headMenu(e){switch(e){case-1:localStorage.removeItem("token"),this.$router.replace("/login"),this.$message.success("\u9000\u51FA\u6210\u529F");break;case 1:this.$message.success("\u4E2A\u4EBA\u4E2D\u5FC3");break;default:console.warn("[header] \u610F\u5916\u7684\u547D\u4EE4");break}}}},F={};var rt=c(ot,nt,it,!1,at,"4c9af9b5",null,null);function at(e){for(let t in F)this[t]=F[t]}var ct=function(){return rt.exports}(),lt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"footer-main"},[s("div",{staticClass:"main-copyright row"},[e._v("Copyright \xA9 2019-"+e._s(new Date().getFullYear())+" \u5B59\u542F\u840C \u7248\u6743\u6240\u6709")]),s("div",{staticClass:"main-record row",on:{click:e.go}},[e._v("\u9102ICP\u590719018246\u53F7-1")])])},ut=[];const mt={name:"Footer",mounted(){},methods:{go(){window.open("https://beian.miit.gov.cn")}}},G={};var dt=c(mt,lt,ut,!1,ht,"1ac719bb",null,null);function ht(e){for(let t in G)this[t]=G[t]}var _t=function(){return dt.exports}(),pt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"Layout"},[s("el-container",[s("l-aside"),s("el-container",{staticClass:"container",attrs:{direction:"vertical"}},[s("l-header"),s("el-main",[s("transition",{attrs:{name:"fade",mode:"out-in"}},[s("keep-alive",{attrs:{include:e.keepName}},[s("router-view",{staticClass:"view"})],1)],1),s("l-footer")],1)],1)],1)],1)},ft=[];const vt={name:"Layout",components:{"l-aside":$e,"l-header":ct,"l-footer":_t},computed:b({},E("alive",["keepArr","keepName"])),mounted(){console.log(this.keepArr,this.keepName)},watch:{$route:function(e,t){const s=e.path.split("/").length,n=t.path.split("/").length;this.transition=s<n?"slide-right":"slide-left"}}},U={};var gt=c(vt,pt,ft,!1,bt,"358af3ba",null,null);function bt(e){for(let t in U)this[t]=U[t]}var v=function(){return gt.exports}();m.use(f);const $t=f.prototype.push;f.prototype.push=function(t){return $t.call(this,t).catch(s=>s)};const yt=[{path:"/login",name:"login",component:()=>l(()=>import("./login.be7a2344.js"),["assets/login.be7a2344.js","assets/login.b1fd7e8c.css","assets/Form.4c1e3438.js","assets/Form.c7434f52.css","assets/request.170a7db9.js","assets/vendor.53200e5a.js"]),meta:{show:!1}},{path:"/404",name:"404",component:()=>l(()=>import("./404.aff9e2a9.js"),["assets/404.aff9e2a9.js","assets/vendor.53200e5a.js"]),meta:{show:!1}}],kt=[{path:"",name:"toDashboard",icon:"el-icon-s-home",component:v,redirect:"/dashboard",children:[{path:"dashboard",name:"dashboard",icon:"el-icon-s-home",component:()=>l(()=>import("./dashboard.dcc830b6.js"),["assets/dashboard.dcc830b6.js","assets/dashboard.876c6359.css","assets/vendor.53200e5a.js","assets/blog.dddb2a4b.js","assets/request.170a7db9.js"])}]},{path:"/application",name:"toAppList",icon:"el-icon-menu",component:v,redirect:"/application/appList",children:[{path:"appList",name:"appList",icon:"el-icon-help",component:()=>l(()=>import("./index.b5b57f20.js"),["assets/index.b5b57f20.js","assets/index.db66d5eb.css","assets/vendor.53200e5a.js"])},{path:"apiDoc",name:"apiDoc",icon:"el-icon-document",component:()=>l(()=>import("./index.360e8f55.js"),["assets/index.360e8f55.js","assets/index.9a902578.css","assets/app.f96feccc.js","assets/request.170a7db9.js","assets/vendor.53200e5a.js"])},{path:"networkDisk",name:"networkDisk",icon:"el-icon-upload",component:()=>l(()=>import("./index.0dd402a8.js"),["assets/index.0dd402a8.js","assets/index.4864f85a.css","assets/app.f96feccc.js","assets/request.170a7db9.js","assets/vendor.53200e5a.js"])},{path:"comapp/:page*",name:"comapp",icon:"el-icon-cherry",component:()=>l(()=>import("./index.5749e584.js"),["assets/index.5749e584.js","assets/index.db66d5eb.css","assets/vendor.53200e5a.js"]),meta:{defaultPath:"/application/comapp"}}]},{path:"/manage",name:"toBlog",icon:"el-icon-setting",component:v,redirect:"/manage/blog",children:[{path:"blog",name:"blog",icon:"el-icon-notebook-1",component:()=>l(()=>import("./blog.619bce35.js"),["assets/blog.619bce35.js","assets/blog.9e410326.css","assets/blog.dddb2a4b.js","assets/request.170a7db9.js","assets/vendor.53200e5a.js","assets/TableFormat.74131c54.js","assets/TableFormat.731b0bcc.css"])},{path:"user",name:"user",icon:"el-icon-user",component:()=>l(()=>import("./user.b2b5ae77.js"),["assets/user.b2b5ae77.js","assets/user.02bdb56e.css","assets/Form.4c1e3438.js","assets/Form.c7434f52.css","assets/request.170a7db9.js","assets/vendor.53200e5a.js","assets/TableFormat.74131c54.js","assets/TableFormat.731b0bcc.css"])}]}],Ct=[{path:"/edit",name:"toEdit",component:v,redirect:"/manage/blog",children:[{path:":id",name:"edit",component:()=>l(()=>import("./edit.515de0ab.js"),["assets/edit.515de0ab.js","assets/edit.cfac240b.css","assets/vendor.53200e5a.js","assets/blog.dddb2a4b.js","assets/request.170a7db9.js"])}],meta:{show:!1}},{path:"/*",name:"404",redirect:"/404",meta:{show:!1}}],xt=["login","404","edit"],p=new f({mode:"history",routes:[...yt,...kt,...Ct],whiteList:xt});function H(e){for(let t=0;t<e.length;t++)if(typeof e[t].children!="undefined"){for(let s=0;s<e[t].children.length;s++)e[t].children[s].path=e[t].path+"/"+e[t].children[s].path;e[t].children=H(e[t].children)}return e}let y=p.options.routes.filter(e=>!(e.meta&&e.meta.show===!1));y=H(y);var wt={namespaced:!0,state:{asideClose:!0,activeMenu:"",menu:y},mutations:{setOpen(e,t){e.asideClose=t},setActiveMenu(e,t){e.activeMenu=t},setMenu(e,t){e.menu=t}},actions:{}},It={namespaced:!0,state:{userInfo:{},isAdmin:!1},mutations:{setUserInfo(e,t){e.userInfo=t,t.power&&t.power.includes("user")?e.isAdmin=!0:e.isAdmin=!1}},actions:{}},Mt={namespaced:!0,state:{debug:{socket:!1}},mutations:{setDebugSocket(e,t){e.debug.socket=t}},actions:{}},Et={namespaced:!0,state:{},mutations:{MSG_RES(e,t){},MSG_200(e,t){},MSG_233(e,t){},MSG_250(e,t){}},actions:{MSG_RES(e,t){},MSG_CONNECT(e,t){console.log("MSG_CONNECT",t)},MSG_200(e,t){},MSG_233(e,t){},MSG_250(e,t){}}},St={namespaced:!0,state:{keepArr:[],keepName:[]},mutations:{setKeepArr(e,t){e.keepName=t.map(s=>(console.log(s.matched[s.matched.length-1]),s.matched[s.matched.length-1].name)),e.keepArr=t,console.log("state.keepName",e.keepName)}},actions:{}};m.use(S);var h=new S.Store({state:{},mutations:{},actions:{},modules:{aside:wt,user:It,app:Mt,socket:Et,alive:St}});p.beforeEach((e,t,s)=>{h.commit("aside/setActiveMenu",e.path);let n=localStorage.getItem("token"),i=JSON.parse(localStorage.getItem("userInfo"));if(n&&i)if(e.path==="/login")s({path:"/"}),$.exports.Message.warning("\u5DF2\u7ECF\u767B\u5F55");else{h.commit("user/setUserInfo",i);let o=[...h.state.alive.keepArr];o.some(r=>r.fullPath===e.fullPath)||(o=[...o,e]),h.commit("alive/setKeepArr",o),s()}else e.path!=="/login"?($.exports.Message.warning("\u672A\u767B\u5F55\u72B6\u6001"),s({path:"/login"})):s()});p.beforeEach((e,t,s)=>{let n=h.state.user.userInfo.power;if(p.options.whiteList.includes(e.name)||n&&n.includes(e.name)||e.name=="dashboard")return s(),!0;s("/dashboard")});class At{constructor({vuex:t,options:s}){this.vuex=t,this.options=s}install(t){t.mixin(this.connect(t,this.options)),this.emitter=new Ot(this.vuex,this.options),new k(this.io,this.emitter)}connect(t,s){if(!s.length)return console.error("\u914D\u7F6E\u9879\u9519\u8BEF"),!1;let n={},i=this.io=t.prototype.$socket={};return t.prototype.$MadderSocket=this,s.forEach(o=>{console.log(o.ip),i[o.name]=io(o.ip);//! socket.io从一开始注册的时候其实就连接了
n[o.name]={}}),{beforeCreate(){this.sockets||(this.sockets=n),Object.keys(this.sockets).forEach(o=>{this.sockets[o].subscribe=(r,_)=>{this.$MadderSocket.emitter.addListener(r,_,this)},this.sockets[o].unsubscribe=r=>{this.$MadderSocket.emitter.removeListener(r,this)}})},mounted(){Object.keys(this.sockets).forEach(o=>{this.$options.sockets&&this.$options.sockets[o]&&Object.keys(this.$options.sockets[o]).forEach(r=>{r!=="subscribe"&&r!=="unsubscribe"&&this.$MadderSocket.emitter.addListener(o,r,this)})})},beforeDestroy(){Object.keys(this.sockets).forEach(o=>{this.$options.sockets&&this.$options.sockets[o]&&Object.keys(this.$options.sockets[o]).forEach(r=>{this.$MadderSocket.emitter.removeListener(o,r,this);//! 这里直接销毁了没有断开事件了
})})}}}}class Ot{constructor(t){this.store=t,this.listeners=new Map}addListener(t,s,n){if(typeof n.$options.sockets[t][s]=="function")this.listeners.has(t)||this.listeners.set(t,new Map),this.listeners.get(t).has(s)||this.listeners.get(t).set(s,[]),this.listeners.get(t).get(s).push({callback:n.$options.sockets[t][s],component:n});else throw new Error("callback must be a function")}removeListener(t,s,n){if(this.listeners.get(t).has(s)){const i=this.listeners.get(t).get(s).filter(o=>o.component!==n);i.length>0?this.listeners.get(t).set(s,i):this.listeners.get(t).delete(s)}}emit(t,s,n){if(!this.listeners.get(n))return!1;this.listeners.get(n).has(t)&&this.listeners.get(n).get(t).forEach(i=>{i.callback.call(i.component,s)}),t!=="ping"&&t!=="pong"&&this.dispatchStore(t,s,n)}dispatchStore(t,s,n){if(this.store&&this.store._actions){let i=t;n&&(i=(n+"_"+t).toUpperCase());for(let o in this.store._actions)o.split("/").pop()===i&&this.store.dispatch(o,s);for(let o in this.store._mutations)o.split("/").pop()===i&&this.store.commit(o,s)}}}const C=class{constructor(t,s){this.io=t,this.register(),this.emitter=s}register(){Object.keys(this.io).forEach(t=>{this.io[t].onevent=s=>{let[n,...i]=s.data;i.length===1&&(i=i[0]),this.onEvent(n,i,s.nsp.split("/").pop())},C.staticEvents.forEach(s=>this.io[t].on(s,n=>this.onEvent(s,n,t)))})}onEvent(t,s,n){this.emitter.emit(t,s,n)}};let k=C;M(k,"staticEvents",["connect","error","disconnect","reconnect","reconnect_attempt","reconnecting","reconnect_error","reconnect_failed","connect_error","connect_timeout","connecting","ping","pong"]);var Rt={computed:b({},E("app",["debug"])),methods:{sokcet(e,t="init",s={}){const n={name:this.$store.state.user.userInfo.username,time:new Date().getTime(),userId:this.$store.state.user.userInfo.id};Object.assign(n,s),this.$socket[e].emit(t,n)}}},Lt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"main",on:{click:function(n){e.visiable?e.close():e.open()}}},[s("h2",{staticClass:"msg-title"},[s("span",[e._v(e._s(e.title)+"\xA0")]),s("i",{class:e.visiable?"el-icon-caret-top":"el-icon-caret-bottom"})]),e.visiable?s("div",{staticClass:"msg-list"},e._l(e.map,function(n,i){return s("div",{key:i,staticClass:"list-item"},[e._v(e._s(n[0])+":"+e._s(n[1]))])}),0):e._e()])},jt=[];const Tt={name:"MsgDetail",props:{title:{type:String,default:""},msgMap:{type:Object,default:()=>{}},dataInfo:{type:Object,default:()=>{}}},data(){return{map:[],visiable:!1}},mounted(){this.map=new Map,Object.keys(this.msgMap).map(t=>{this.map.set(this.msgMap[t],this.dataInfo[t])})},methods:{open(){this.visiable=!0},close(){this.visiable=!1}}},B={};var Dt=c(Tt,Lt,jt,!1,Vt,"2d259599",null,null);function Vt(e){for(let t in B)this[t]=B[t]}var Nt=function(){return Dt.exports}();const Pt=new m,Ft=Pt.$createElement;function Gt(e,t,s=15e3){$.exports.Notification({type:e,message:Ft(Nt,{props:{title:t.msg,msgMap:t.msgMap,dataInfo:t.dataInfo}}),duration:s,position:"bottom-right"})}m.use(Q);m.use(new At({vuex:h,options:[{name:"msg",ip:"http://api.sunqm.com/msg"},{name:"chat",ip:"http://api.sunqm.com/chat"},{name:"term",ip:"http://api.sunqm.com/term"}]}));m.mixin(Rt);m.config.productionTip=!1;m.prototype.$msgTip=Gt;Z.start({plugins:{modules:{comapp:[{loader(e){return e}}]}}});const Ut=new m({router:p,store:h,render:e=>e(re)}).$mount("#app");window.$debug=Ut,h.commit("app/setDebugSocket",!0);export{c as n,p as r};
//# sourceMappingURL=index.303c07b0.js.map
