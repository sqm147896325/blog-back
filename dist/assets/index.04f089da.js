var X=Object.defineProperty,J=Object.defineProperties;var Y=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var b=(e,t,s)=>t in e?X(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,_=(e,t)=>{for(var s in t||(t={}))Q.call(t,s)&&b(e,s,t[s]);if(I)for(var s of I(t))Z.call(t,s)&&b(e,s,t[s]);return e},E=(e,t)=>J(e,Y(t));var S=(e,t,s)=>(b(e,typeof t!="symbol"?t+"":t,s),s);import{x as ee,a as te,m as v,b as A,V as u,c as g,d as O,e as k,E as se,f as ne}from"./vendor.13bf5847.js";const ie=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerpolicy&&(r.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?r.credentials="include":i.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=s(i);fetch(i.href,r)}};ie();var re=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},oe=[];function l(e,t,s,n,i,r,o,f){var a=typeof e=="function"?e.options:e;t&&(a.render=t,a.staticRenderFns=s,a._compiled=!0),n&&(a.functional=!0),r&&(a._scopeId="data-v-"+r);var d;if(o?(d=function(c){c=c||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!c&&typeof __VUE_SSR_CONTEXT__!="undefined"&&(c=__VUE_SSR_CONTEXT__),i&&i.call(this,c),c&&c._registeredComponents&&c._registeredComponents.add(o)},a._ssrRegister=d):i&&(d=f?function(){i.call(this,(a.functional?this.parent:this).$root.$options.shadowRoot)}:i),d)if(a.functional){a._injectStyles=d;var B=a.render;a.render=function(W,w){return d.call(w),B(W,w)}}else{var x=a.beforeCreate;a.beforeCreate=x?[].concat(x,d):[d]}return{exports:e,options:a}}const ae={name:"App"},R={};var le=l(ae,re,oe,!1,ce,null,null,null);function ce(e){for(let t in R)this[t]=R[t]}var ue=function(){return le.exports}();const me="modulepreload",j={},de="/page/back/",m=function(t,s){return!s||s.length===0?t():Promise.all(s.map(n=>{if(n=`${de}${n}`,n in j)return;j[n]=!0;const i=n.endsWith(".css"),r=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${r}`))return;const o=document.createElement("link");if(o.rel=i?"stylesheet":me,i||(o.as="script",o.crossOrigin=""),o.href=n,document.head.appendChild(o),i)return new Promise((f,a)=>{o.addEventListener("load",f),o.addEventListener("error",a)})})).then(()=>t())};var he=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",e._l(e.routesMenu,function(n){return s("div",{key:n.name,staticClass:"aside-item"},[typeof n.children=="undefined"?s("el-menu-item",{attrs:{index:e.getPath(n)},on:{click:function(i){return e.chooseMenu(n)}}},[s("i",{class:n.icon||"el-icon-menu"}),s("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(n.meta.title))])]):n.children.length==1?s("el-menu-item",{attrs:{index:e.getPath(n)},on:{click:function(i){return e.chooseMenu(n.children[0])}}},[s("i",{class:n.children[0].icon||"el-icon-menu"}),s("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(n.children[0].meta.title))])]):s("el-submenu",{attrs:{index:n.name},on:{click:function(i){return e.chooseMenu(n)}}},[s("template",{slot:"title"},[s("i",{class:n.icon||"el-icon-menu"}),s("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(n.meta.title))])]),s("aside-item",{attrs:{itemMenu:n.children}})],2)],1)}),0)},_e=[];const pe={name:"AsideItem",props:{itemMenu:{type:Array,default:()=>[]}},data(){return{routesMenu:[]}},mounted(){this.init()},methods:{init(){this.itemMenu.length==0?(this.routesMenu=this.$store.state.aside.menu,this.routesMenu=this.routesMenu.filter(e=>{var t;return!!(((t=this.$store.state.user.userInfo.power)==null?void 0:t.includes(e.name))||e.name=="dashboard")})):(this.routesMenu=this.itemMenu,this.routesMenu=this.routesMenu.filter(e=>{var t;return!!((t=this.$store.state.user.userInfo.power)==null?void 0:t.includes(e.name))}))},getPath(e){let t=e.path;return e.meta&&e.meta.defaultPath&&(t=e.meta.defaultPath),t},chooseMenu(e){let t=this.getPath(e);this.$store.commit("aside/setActiveMenu",t)}}},L={};var fe=l(pe,he,_e,!1,ve,"01a82c77",null,null);function ve(e){for(let t in L)this[t]=L[t]}var ge=function(){return fe.exports}(),$e=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"aside"},[s("el-aside",{staticClass:"main",attrs:{width:"100%"}},[s("el-menu",{staticClass:"menu",attrs:{"default-active":e.defaultActive(),collapse:e.collapse(),router:!0},on:{open:e.handleOpen}},[s("aside-item")],1)],1)],1)},be=[];const ke={name:"Aside",components:{AsideItem:ge},data(){return{}},mounted(){},methods:{handleOpen(e,t){console.log(e,t)},handleClose(e,t){console.log(e,t)},defaultActive(){return this.$store.state.aside.activeMenu},collapse(){return this.$store.state.aside.asideClose}}},T={};var ye=l(ke,$e,be,!1,Ce,"1232e348",null,null);function Ce(e){for(let t in T)this[t]=T[t]}var Me=function(){return ye.exports}();var xe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"sys-msg"},[s("div",{ref:"xterm",attrs:{id:"xterm"}})])},we=[];const Ie={name:"SysMsg",data(){return{term:null,fitAddon:null,sshState:!1,historyCmd:[],historyIndex:0,temCmdStr:[],temCmdIndex:0,symbol:"$ > ",ins:0}},computed:{pipAfter(){return this.temCmdStr.slice(this.temCmdIndex)}},mounted(){this.initTerm()},beforeDestroy(){this.socket.term.close(),this.term&&this.term.dispose()},methods:{initTerm(){const e=new ee.exports.Terminal({cursorBlink:!0,cursorStyle:"bar",scrollback:100});this.term=e;const t=new te.exports.FitAddon;this.term.loadAddon(t),this.fitAddon=t,e.open(this.$refs.xterm),e.focus(),this.term.onData(s=>{this.sshState?this.$socket.term.emit("res",s):this.keyInput(s)}),this.initGreet()},initGreet(){this.term.write("*** \uFF08^0^\uFF09 ***"),this.keyEnter()},keyInput(e){if(e.includes(";"))return console.log("\u6682\u65F6\u4E0D\u652F\u6301\u7EC4\u5408\u952E"),!1;if(e==="\r")this.keyEnter();else if(e==="\x7F")this.keyBackspace();else if(e==="[A")this.keyUp();else if(e==="[B")this.keyDown();else if(e==="[C")this.keyRight();else if(e==="[D")this.keyLeft();else{let t=[],s=[];this.pipAfter.forEach(i=>{t.push(i),s.push("\b")});const n=e+t.join("")+s.join("");this.term.write(n),this.temCmdStr.splice(this.temCmdIndex,this.ins,e),this.temCmdIndex++}},keyEnter(){this.cmd(this.temCmdStr.join("")),this.term.writeln(""),this.term.write(this.symbol),this.historyCmd.push(this.temCmdStr),this.historyIndex++,this.temCmdStr=[],this.temCmdIndex=0},keyBackspace(){if(this.temCmdIndex===0)return!1;let e=[],t=[];this.pipAfter.forEach(n=>{e.push(n),t.push("\b")});const s="\b"+e.join("")+" \b"+t.join("");this.term.write(s),this.temCmdIndex--,this.temCmdStr.splice(this.temCmdIndex,this.ins+1)},keyUp(){this.historyIndex!==0&&this.historyIndex--,this.term.write(this.historyCmd[this.historyIndex].join(""))},keyDown(){this.historyIndex<this.historyCmd.length&&this.historyIndex++,this.term.write(this.historyCmd[this.historyIndex].join(""))},keyRight(){if(this.temCmdIndex>=this.temCmdStr.length)return!1;this.temCmdIndex++,this.term.write("[C")},keyLeft(){if(this.temCmdIndex<=0)return!1;this.temCmdIndex--,this.term.write("[D")},getColsAndRows(e){return e=e||document.getElementById("xterm"),{rows:parseInt((e.clientHeight-0)/18),cols:10}},resizeTerm(){this.fitAddon.fit(),this.term.scrollToBottom()},cmd(e){console.log(e)}},sockets:{term:{res(e){this.term.write(e.toString())}}}},V={};var Ee=l(Ie,xe,we,!1,Se,"4d25955e",null,null);function Se(e){for(let t in V)this[t]=V[t]}var Ae=function(){return Ee.exports}(),Oe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"user-msg"},[s("div",{staticClass:"msg-list"},e._l(e.userList,function(n,i){return s("div",{key:i,staticClass:"list-item",class:e.chooseIndex===i?"item-choose":"",on:{click:function(r){return e.chooseItem(n,i)}}},[s("div",{staticClass:"item-img"},[e._v(e._s(n.img))]),s("div",{staticClass:"item-content"},[s("div",{staticClass:"title"},[s("div",{staticClass:"title-name"},[e._v(e._s(n.name))]),s("div",{staticClass:"title-time"},[e._v(e._s(n.time))])]),s("div",{staticClass:"info"},[s("div",{staticClass:"info-content"},[e._v(e._s(n.content))]),s("div",{staticClass:"info-num"},[e._v(e._s(n.num))])])])])}),0),e._m(0)])},Re=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"msg-main"},[s("div",{staticClass:"main-content"}),s("div",{staticClass:"main-input"})])}];const je={data(){return{userList:[{img:"url",name:"test",time:"2021-10-23",content:"test",num:5,userId:1e4},{img:"url",name:"test",time:"2021-10-23",content:"test",num:5,userId:1e4},{img:"url",name:"test",time:"2021-10-23",content:"test",num:5,userId:1e4},{img:"url",name:"test",time:"2021-10-23",content:"test",num:5,userId:1e4},{img:"url",name:"test",time:"2021-10-23",content:"test",num:5,userId:1e4},{img:"url",name:"test",time:"2021-10-23",content:"test",num:5,userId:1e4},{img:"url",name:"test",time:"2021-10-23",content:"test",num:5,userId:1e4},{img:"url",name:"test",time:"2021-10-23",content:"test",num:5,userId:1e4},{img:"url",name:"test",time:"2021-10-23",content:"test",num:5,userId:1e4},{img:"url",name:"test",time:"2021-10-23",content:"test",num:5,userId:1e4},{img:"url",name:"test",time:"2021-10-23",content:"test",num:5,userId:1e4}],chooseIndex:""}},methods:{chooseItem(e,t){this.chooseIndex=t}}},D={};var Le=l(je,Oe,Re,!1,Te,"9c2bf6d2",null,null);function Te(e){for(let t in D)this[t]=D[t]}var Ve=function(){return Le.exports}(),De=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div")},Pe=[];const Fe={},P={};var Ne=l(Fe,De,Pe,!1,Ge,null,null,null);function Ge(e){for(let t in P)this[t]=P[t]}var Ue=function(){return Ne.exports}(),He=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div")},Ke=[];const qe={},F={};var ze=l(qe,He,Ke,!1,Be,null,null,null);function Be(e){for(let t in F)this[t]=F[t]}var We=function(){return ze.exports}(),Xe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-dialog",e._g(e._b({attrs:{title:"\u6D88\u606F\u63A7\u5236\u53F0",width:"80%",top:"5vh","close-on-click-modal":!1}},"el-dialog",e.$attrs,!1),e.$listeners),[s("div",{staticClass:"message-content"},[s("el-tabs",{attrs:{stretch:!0}},[s("el-tab-pane",[s("span",{attrs:{slot:"label"},slot:"label"},[s("i",{staticClass:"el-icon-cpu"}),e._v("\u7CFB\u7EDF")]),s("SysMsg")],1),s("el-tab-pane",[s("span",{attrs:{slot:"label"},slot:"label"},[s("i",{staticClass:"el-icon-user"}),e._v("\u7528\u6237")]),s("UserMsg")],1),s("el-tab-pane",[s("span",{attrs:{slot:"label"},slot:"label"},[s("i",{staticClass:"el-icon-bell"}),e._v("\u901A\u77E5")]),s("NoticeMsg")],1),s("el-tab-pane",[s("span",{attrs:{slot:"label"},slot:"label"},[s("i",{staticClass:"el-icon-connection"}),e._v("\u804A\u5929\u5BA4")]),s("RoomMsg")],1)],1)],1)])},Je=[];const Ye={components:{SysMsg:Ae,UserMsg:Ve,NoticeMsg:Ue,RoomMsg:We},data(){return{}},mounted(){},methods:{}},N={};var Qe=l(Ye,Xe,Je,!1,Ze,"d3bf8108",null,null);function Ze(e){for(let t in N)this[t]=N[t]}var et=function(){return Qe.exports}(),tt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"tag-content"},[e._l(e.keepArr,function(n){return s("el-tag",{key:n.name,attrs:{closable:n.meta.title!=="\u9996\u9875","disable-transitions":!1,size:"mini",hit:!1,effect:e.activeMenu===n.fullPath?"dark":"plain"},on:{click:function(i){return e.handleClick(n)},close:function(i){return e.handleClose(n)}}},[e._v(" "+e._s(n.meta.title)+" ")])}),e.inputVisible?s("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"mini"},on:{blur:e.handleInputConfirm},nativeOn:{keyup:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.handleInputConfirm.apply(null,arguments)}},model:{value:e.inputValue,callback:function(n){e.inputValue=n},expression:"inputValue"}}):s("el-button",{staticClass:"button-new-tag",attrs:{size:"mini"},on:{click:e.showInput}},[e._v("+ \u65B0\u9875\u7B7E")])],2)},st=[];const nt={name:"HeadTag",data(){return{inputVisible:!1,inputValue:""}},computed:_(_({},v("alive",["keepArr"])),v("aside",["activeMenu"])),mounted(){console.log("keepArr",this.keepArr)},methods:{handleClose(e){console.log("handleClose",e),this.$store.commit("alive/closeKeep",e)},handleClick(e){console.log("handleClick",e),this.$router.push({name:e.name})},showInput(){this.inputVisible=!0,this.$nextTick(e=>{this.$refs.saveTagInput.$refs.input.focus()})},handleInputConfirm(){let e=this.inputValue;e&&(console.log("inputValue",e),this.$message.info("\u5F00\u53D1\u4E2D")),this.inputVisible=!1,this.inputValue=""}}},G={};var it=l(nt,tt,st,!1,rt,"7be7958c",null,null);function rt(e){for(let t in G)this[t]=G[t]}var ot=function(){return it.exports}(),at=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"header"},[s("el-header",{staticClass:"main",attrs:{height:"40px"}},[s("i",{class:e.collapse()?"el-icon-s-unfold":"el-icon-s-fold",on:{click:e.setOpen}}),s("el-breadcrumb",{staticClass:"breadcrumb",attrs:{separator:"/"}},[s("el-breadcrumb-item",{attrs:{to:"/"}},[e._v("\u9996\u9875")]),e._l(e.matched,function(n){return s("el-breadcrumb-item",{key:n.path,attrs:{to:n.path}},[e._v(e._s(n.meta.title))])})],2),s("div",{staticClass:"main-container"},[s("div"),s("div",{staticClass:"main-left"},[s("el-badge",{staticClass:"left-msg",attrs:{hidden:!e.msgNum||e.msgVisible,value:e.msgNum,max:99}},[s("i",{staticClass:"msg-icon",class:e.msgNum?"el-icon-chat-line-round":"el-icon-chat-round",on:{click:e.msgOpen}})]),s("el-dropdown",{staticClass:"left-dropdown",on:{command:e.headMenu}},[s("span",{staticClass:"dropdown-head"},[s("el-avatar",{attrs:{shape:"square",size:32}},[e._v(" user ")]),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})],1),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.option,function(n,i){return s("el-dropdown-item",{key:i,attrs:{command:n.value}},[e._v(e._s(n.lable))])}),1)],1)],1)])],1),s("div",{staticClass:"tag-container"},[s("HeadTag")],1),s("Message",{staticClass:"messge-dialog",attrs:{visible:e.msgVisible},on:{"update:visible":function(n){e.msgVisible=n}}})],1)},lt=[];const ct={name:"Header",components:{Message:et,HeadTag:ot},data(){return{matched:[],option:[{value:-1,lable:"\u767B\u51FA"},{value:1,lable:"\u4E2A\u4EBA\u4E2D\u5FC3"}],msgNum:0,msgVisible:!1,msgArr:[]}},mounted(){this.init()},watch:{$route(){this.routeChange()}},sockets:{msg:{res(e){this.debug.socket&&console.log("res",e.dataInfo)},"233"(e){this.debug.socket&&console.log("233",e),this.$msgTip("success",e)},"250"(e){this.debug.socket&&console.log("250",e),this.$msgTip("error",e,0)},reconnect(){this.debug.socket&&console.log("reconnect \u91CD\u65B0\u8FDE\u63A5"),this.sokcet("msg","init")},disconnect(){this.debug.socket&&console.log("\u65AD\u5F00\u8FDE\u63A5")}}},methods:{init(){this.sokcet("msg","init"),this.routeChange()},routeChange(){this.matched=this.$route.matched.filter(e=>e.name!="dashboard")},setOpen(){this.$store.commit("aside/setOpen",!this.$store.state.aside.asideClose)},collapse(){return this.$store.state.aside.asideClose},msgOpen(){this.msgVisible=!0},headMenu(e){switch(e){case-1:localStorage.removeItem("token"),this.$router.replace("/login"),this.$commit("alive/setKeepArr",arr),this.$message.success("\u9000\u51FA\u6210\u529F");break;case 1:this.$message.success("\u4E2A\u4EBA\u4E2D\u5FC3");break;default:console.warn("[header] \u610F\u5916\u7684\u547D\u4EE4");break}}}},U={};var ut=l(ct,at,lt,!1,mt,"37a7f5f6",null,null);function mt(e){for(let t in U)this[t]=U[t]}var dt=function(){return ut.exports}(),ht=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"footer-main"},[s("div",{staticClass:"main-copyright row"},[e._v("Copyright \xA9 2019-"+e._s(new Date().getFullYear())+" \u5B59\u542F\u840C \u7248\u6743\u6240\u6709")]),s("div",{staticClass:"main-record row",on:{click:e.go}},[e._v("\u9102ICP\u590719018246\u53F7-1")])])},_t=[];const pt={name:"Footer",mounted(){},methods:{go(){window.open("https://beian.miit.gov.cn")}}},H={};var ft=l(pt,ht,_t,!1,vt,"1ac719bb",null,null);function vt(e){for(let t in H)this[t]=H[t]}var gt=function(){return ft.exports}(),$t=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"Layout"},[s("el-container",[e.fullScreen?e._e():s("l-aside"),s("el-container",{staticClass:"container",attrs:{direction:"vertical"}},[e.fullScreen?e._e():s("l-header"),s("el-main",[s("transition",{attrs:{name:"fade",mode:"out-in"}},[s("keep-alive",{attrs:{include:e.keepName}},[s("router-view",{staticClass:"view"})],1)],1),s("l-footer")],1)],1)],1)],1)},bt=[];const kt={name:"Layout",components:{"l-aside":Me,"l-header":dt,"l-footer":gt},computed:E(_(_(_({},A("alive",["keepTitle"])),A("alive",["keepName"])),v("alive",["keepArr"])),{fullScreen(){return this.$route.meta&&this.$route.meta.fullScreen}}),mounted(){},watch:{$route:function(e,t){const s=e.path.split("/").length,n=t.path.split("/").length;this.transition=s<n?"slide-right":"slide-left"}}},K={};var yt=l(kt,$t,bt,!1,Ct,"6f1b4d4e",null,null);function Ct(e){for(let t in K)this[t]=K[t]}var $=function(){return yt.exports}();u.use(g);const Mt=g.prototype.push;g.prototype.push=function(t){return Mt.call(this,t).catch(s=>s)};const xt=[{path:"/login",name:"login",component:()=>m(()=>import("./login.51d66f63.js"),["assets/login.51d66f63.js","assets/login.b1fd7e8c.css","assets/Form.c8441187.js","assets/Form.c7434f52.css","assets/request.8c914d74.js","assets/vendor.13bf5847.js"]),meta:{show:!1,title:"\u767B\u9646"}}],wt=[{path:"",name:"home",icon:"el-icon-s-home",component:$,redirect:"/dashboard",meta:{title:"\u9996\u9875"},children:[{path:"dashboard",name:"dashboard",icon:"el-icon-s-home",component:()=>m(()=>import("./dashboard.63cee441.js"),["assets/dashboard.63cee441.js","assets/dashboard.876c6359.css","assets/vendor.13bf5847.js","assets/blog.82f7bc7a.js","assets/request.8c914d74.js"]),meta:{title:"\u9996\u9875"}}]},{path:"/application",name:"application",icon:"el-icon-menu",component:$,redirect:"/application/appList",meta:{title:"\u5E94\u7528"},children:[{path:"appList",name:"appList",icon:"el-icon-help",component:()=>m(()=>import("./index.db653b6a.js"),["assets/index.db653b6a.js","assets/index.db66d5eb.css","assets/vendor.13bf5847.js"]),meta:{title:"\u5E94\u7528\u5217\u8868"}},{path:"apiDoc",name:"apiDoc",icon:"el-icon-document",component:()=>m(()=>import("./index.07c38b48.js"),["assets/index.07c38b48.js","assets/index.9a902578.css","assets/app.4e271e56.js","assets/request.8c914d74.js","assets/vendor.13bf5847.js"]),meta:{title:"\u63A5\u53E3\u6587\u6863"}},{path:"networkDisk",name:"networkDisk",icon:"el-icon-upload",component:()=>m(()=>import("./index.c76bf870.js"),["assets/index.c76bf870.js","assets/index.4864f85a.css","assets/app.4e271e56.js","assets/request.8c914d74.js","assets/vendor.13bf5847.js"]),meta:{title:"\u7F51\u76D8"}},{path:"comapp/:page*",name:"comapp",icon:"el-icon-cherry",component:()=>m(()=>import("./index.11448717.js"),["assets/index.11448717.js","assets/index.db66d5eb.css","assets/vendor.13bf5847.js"]),meta:{defaultPath:"/application/comapp",title:"\u7EC4\u4EF6"}}]},{path:"/manage",name:"manage",icon:"el-icon-setting",component:$,redirect:"/manage/blog",meta:{title:"\u7BA1\u7406"},children:[{path:"blog",name:"blog",icon:"el-icon-notebook-1",component:()=>m(()=>import("./blog.24063a93.js"),["assets/blog.24063a93.js","assets/blog.28215272.css","assets/blog.82f7bc7a.js","assets/request.8c914d74.js","assets/vendor.13bf5847.js","assets/TableFormat.bb6db183.js","assets/TableFormat.731b0bcc.css"]),meta:{title:"\u535A\u5BA2\u7BA1\u7406"}},{path:"user",name:"user",icon:"el-icon-user",component:()=>m(()=>import("./user.e269d1a3.js"),["assets/user.e269d1a3.js","assets/user.02bdb56e.css","assets/Form.c8441187.js","assets/Form.c7434f52.css","assets/request.8c914d74.js","assets/vendor.13bf5847.js","assets/TableFormat.bb6db183.js","assets/TableFormat.731b0bcc.css"]),meta:{title:"\u7528\u6237\u7BA1\u7406"}}]}],It=[{path:"/edit",name:"toEdit",component:$,redirect:"/manage/blog",children:[{path:":id",name:"edit",component:()=>m(()=>import("./edit.e612255f.js"),["assets/edit.e612255f.js","assets/edit.cfac240b.css","assets/vendor.13bf5847.js","assets/blog.82f7bc7a.js","assets/request.8c914d74.js"]),meta:{fullScreen:!0}}],meta:{show:!1}},{path:"/*",name:"404",redirect:"/404",meta:{show:!1,title:"404"}}],Et=["login","404","edit"],p=new g({mode:"history",base:"/page/back",routes:[...xt,...wt,...It],whiteList:Et});function q(e){for(let t=0;t<e.length;t++){const s=e[t];if(typeof s.children!="undefined"){for(let n=0;n<s.children.length;n++)s.children[n].path=s.path+"/"+s.children[n].path;s.children=q(s.children)}}return e}let y=p.options.routes.filter(e=>!(e.meta&&e.meta.show===!1));y=q(y);var St={namespaced:!0,state:{asideClose:!0,activeMenu:"",menu:y},mutations:{setOpen(e,t){e.asideClose=t},setActiveMenu(e,t){e.activeMenu=t},setMenu(e,t){e.menu=t}},actions:{}},At={namespaced:!0,state:{userInfo:{},isAdmin:!1},mutations:{setUserInfo(e,t){e.userInfo=t,t.power&&t.power.includes("user")?e.isAdmin=!0:e.isAdmin=!1}},actions:{}},Ot={namespaced:!0,state:{debug:{socket:!1}},mutations:{setDebugSocket(e,t){e.debug.socket=t}},actions:{}},Rt={namespaced:!0,state:{},mutations:{MSG_RES(e,t){},MSG_200(e,t){},MSG_233(e,t){},MSG_250(e,t){}},actions:{MSG_RES(e,t){},MSG_CONNECT(e,t){console.log("MSG_CONNECT",t)},MSG_200(e,t){},MSG_233(e,t){},MSG_250(e,t){}}},jt={namespaced:!0,state:{keepArr:[]},getters:{keepTitle:e=>e.keepArr.map(t=>t.meta.title),keepName:e=>e.keepArr.map(t=>t.name)},mutations:{setKeepArr(e,t){t.some(s=>s.name==="dashboard")?e.keepArr=t:e.keepArr=[{name:"dashboard",fullPath:"/dashboard",path:"/dashboard",meta:{title:"\u9996\u9875"}},...t]},closeKeep(e,t){e.keepArr=e.keepArr.filter(s=>s.meta.title!==t.meta.title),p.replace({path:"/dashboard"})}},actions:{}};u.use(O);var h=new O.Store({state:{},mutations:{},actions:{},modules:{aside:St,user:At,app:Ot,socket:Rt,alive:jt}});p.beforeEach((e,t,s)=>{h.commit("aside/setActiveMenu",e.path);let n=localStorage.getItem("token"),i=JSON.parse(localStorage.getItem("userInfo"));if(n&&i)if(e.path==="/login")s({path:"/"}),k.exports.Message.warning("\u5DF2\u7ECF\u767B\u5F55");else{h.commit("user/setUserInfo",i);let r=[...h.state.alive.keepArr];r.some(o=>o.fullPath===e.fullPath)||(r=[...r,e]),h.commit("alive/setKeepArr",r),s()}else e.path!=="/login"?(k.exports.Message.warning("\u672A\u767B\u5F55\u72B6\u6001"),s({path:"/login"})):s()});p.beforeEach((e,t,s)=>{let n=h.state.user.userInfo.power;if(p.options.whiteList.includes(e.name)||n&&n.includes(e.name)||e.name=="dashboard")return s(),!0;s("/dashboard")});class Lt{constructor({vuex:t,options:s}){this.vuex=t,this.options=s}install(t){t.mixin(this.connect(t,this.options)),this.emitter=new Tt(this.vuex,this.options),new C(this.io,this.emitter)}connect(t,s){if(!s.length)return console.error("\u914D\u7F6E\u9879\u9519\u8BEF"),!1;let n={},i=this.io=t.prototype.$socket={};return t.prototype.$MadderSocket=this,s.forEach(r=>{console.log(r.ip),i[r.name]=io(r.ip);//! socket.io从一开始注册的时候其实就连接了
n[r.name]={}}),{beforeCreate(){this.sockets||(this.sockets=n),Object.keys(this.sockets).forEach(r=>{this.sockets[r].subscribe=(o,f)=>{this.$MadderSocket.emitter.addListener(o,f,this)},this.sockets[r].unsubscribe=o=>{this.$MadderSocket.emitter.removeListener(o,this)}})},mounted(){Object.keys(this.sockets).forEach(r=>{this.$options.sockets&&this.$options.sockets[r]&&Object.keys(this.$options.sockets[r]).forEach(o=>{o!=="subscribe"&&o!=="unsubscribe"&&this.$MadderSocket.emitter.addListener(r,o,this)})})},beforeDestroy(){Object.keys(this.sockets).forEach(r=>{this.$options.sockets&&this.$options.sockets[r]&&Object.keys(this.$options.sockets[r]).forEach(o=>{this.$MadderSocket.emitter.removeListener(r,o,this);//! 这里直接销毁了没有断开事件了
})})}}}}class Tt{constructor(t){this.store=t,this.listeners=new Map}addListener(t,s,n){if(typeof n.$options.sockets[t][s]=="function")this.listeners.has(t)||this.listeners.set(t,new Map),this.listeners.get(t).has(s)||this.listeners.get(t).set(s,[]),this.listeners.get(t).get(s).push({callback:n.$options.sockets[t][s],component:n});else throw new Error("callback must be a function")}removeListener(t,s,n){if(this.listeners.get(t).has(s)){const i=this.listeners.get(t).get(s).filter(r=>r.component!==n);i.length>0?this.listeners.get(t).set(s,i):this.listeners.get(t).delete(s)}}emit(t,s,n){if(!this.listeners.get(n))return!1;this.listeners.get(n).has(t)&&this.listeners.get(n).get(t).forEach(i=>{i.callback.call(i.component,s)}),t!=="ping"&&t!=="pong"&&this.dispatchStore(t,s,n)}dispatchStore(t,s,n){if(this.store&&this.store._actions){let i=t;n&&(i=(n+"_"+t).toUpperCase());for(let r in this.store._actions)r.split("/").pop()===i&&this.store.dispatch(r,s);for(let r in this.store._mutations)r.split("/").pop()===i&&this.store.commit(r,s)}}}const M=class{constructor(t,s){this.io=t,this.register(),this.emitter=s}register(){Object.keys(this.io).forEach(t=>{this.io[t].onevent=s=>{let[n,...i]=s.data;i.length===1&&(i=i[0]),this.onEvent(n,i,s.nsp.split("/").pop())},M.staticEvents.forEach(s=>this.io[t].on(s,n=>this.onEvent(s,n,t)))})}onEvent(t,s,n){this.emitter.emit(t,s,n)}};let C=M;S(C,"staticEvents",["connect","error","disconnect","reconnect","reconnect_attempt","reconnecting","reconnect_error","reconnect_failed","connect_error","connect_timeout","connecting","ping","pong"]);var Vt={computed:_({},v("app",["debug"])),methods:{sokcet(e,t="init",s={}){const n={name:this.$store.state.user.userInfo.username,time:new Date().getTime(),userId:this.$store.state.user.userInfo.id};Object.assign(n,s),this.$socket[e].emit(t,n)}}},Dt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"main",on:{click:function(n){e.visiable?e.close():e.open()}}},[s("h2",{staticClass:"msg-title"},[s("span",[e._v(e._s(e.title)+"\xA0")]),s("i",{class:e.visiable?"el-icon-caret-top":"el-icon-caret-bottom"})]),e.visiable?s("div",{staticClass:"msg-list"},e._l(e.map,function(n,i){return s("div",{key:i,staticClass:"list-item"},[e._v(e._s(n[0])+":"+e._s(n[1]))])}),0):e._e()])},Pt=[];const Ft={name:"MsgDetail",props:{title:{type:String,default:""},msgMap:{type:Object,default:()=>{}},dataInfo:{type:Object,default:()=>{}}},data(){return{map:[],visiable:!1}},mounted(){this.map=new Map,Object.keys(this.msgMap).map(t=>{this.map.set(this.msgMap[t],this.dataInfo[t])})},methods:{open(){this.visiable=!0},close(){this.visiable=!1}}},z={};var Nt=l(Ft,Dt,Pt,!1,Gt,"2d259599",null,null);function Gt(e){for(let t in z)this[t]=z[t]}var Ut=function(){return Nt.exports}();const Ht=new u,Kt=Ht.$createElement;function qt(e,t,s=15e3){k.exports.Notification({type:e,message:Kt(Ut,{props:{title:t.msg,msgMap:t.msgMap,dataInfo:t.dataInfo}}),duration:s,position:"bottom-right"})}u.use(se);u.use(new Lt({vuex:h,options:[{name:"msg",ip:"http://api.sunqm.com/msg"},{name:"chat",ip:"http://api.sunqm.com/chat"},{name:"term",ip:"http://api.sunqm.com/term"}]}));u.mixin(Vt);u.config.productionTip=!1;u.prototype.$msgTip=qt;ne.start({plugins:{modules:{comapp:[{loader(e){return e}}]}}});const zt=new u({router:p,store:h,render:e=>e(ue)}).$mount("#app");window.$debug=zt,h.commit("app/setDebugSocket",!0);export{l as n,p as r};
