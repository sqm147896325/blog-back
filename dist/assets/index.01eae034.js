var H=Object.defineProperty;var w=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var g=(e,t,s)=>t in e?H(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,x=(e,t)=>{for(var s in t||(t={}))z.call(t,s)&&g(e,s,t[s]);if(w)for(var s of w(t))K.call(t,s)&&g(e,s,t[s]);return e};var I=(e,t,s)=>(g(e,typeof t!="symbol"?t+"":t,s),s);import{x as W,a as X,V as u,b as f,c as E,e as b,m as J,E as Y}from"./vendor.aabb9fcb.js";const Q=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function s(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=s(i);fetch(i.href,o)}};Q();(function(){var e=console.log;console.log=function(t){typeof arguments[0]=="string"&&arguments.length===1&&(arguments[0]="%c %c"+arguments[0],arguments[1]="color: #4e72b8;background-image: url(https://img.shields.io/badge/LS-%E6%97%A5%E5%BF%97-brightgreen?style=plastic); padding: 3px 25px; margin: 0px 8px 0px 0px; background-size: contain; background-repeat: no-repeat;",arguments[2]="color: #F56C6C; font-weight: bold",arguments.length=3),e.apply(console,arguments)}})();var Z=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},ee=[];function c(e,t,s,n,i,o,r,_){var a=typeof e=="function"?e.options:e;t&&(a.render=t,a.staticRenderFns=s,a._compiled=!0),n&&(a.functional=!0),o&&(a._scopeId="data-v-"+o);var d;if(r?(d=function(l){l=l||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!l&&typeof __VUE_SSR_CONTEXT__!="undefined"&&(l=__VUE_SSR_CONTEXT__),i&&i.call(this,l),l&&l._registeredComponents&&l._registeredComponents.add(r)},a._ssrRegister=d):i&&(d=_?function(){i.call(this,(a.functional?this.parent:this).$root.$options.shadowRoot)}:i),d)if(a.functional){a._injectStyles=d;var B=a.render;a.render=function(q,M){return d.call(M),B(q,M)}}else{var k=a.beforeCreate;a.beforeCreate=k?[].concat(k,d):[d]}return{exports:e,options:a}}const te={name:"App"},S={};var se=c(te,Z,ee,!1,ne,null,null,null);function ne(e){for(let t in S)this[t]=S[t]}var ie=function(){return se.exports}();const oe="modulepreload",A={},re="/page/back/",m=function(t,s){return!s||s.length===0?t():Promise.all(s.map(n=>{if(n=`${re}${n}`,n in A)return;A[n]=!0;const i=n.endsWith(".css"),o=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${o}`))return;const r=document.createElement("link");if(r.rel=i?"stylesheet":oe,i||(r.as="script",r.crossOrigin=""),r.href=n,document.head.appendChild(r),i)return new Promise((_,a)=>{r.addEventListener("load",_),r.addEventListener("error",a)})})).then(()=>t())};var ae=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",e._l(e.routesMenu,function(n){return s("div",{key:n.name,staticClass:"aside-item"},[typeof n.children=="undefined"?s("el-menu-item",{attrs:{index:n.path},on:{click:function(i){return e.chooseMenu(n.path)}}},[s("i",{class:n.icon||"el-icon-menu"}),s("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(n.name))])]):n.children.length==1?s("el-menu-item",{attrs:{index:n.children[0].path},on:{click:function(i){return e.chooseMenu(n.children[0].path)}}},[s("i",{class:n.children[0].icon||"el-icon-menu"}),s("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(n.children[0].name))])]):s("el-submenu",{attrs:{index:n.name},on:{click:function(i){return e.chooseMenu(n.path)}}},[s("template",{slot:"title"},[s("i",{class:n.icon||"el-icon-menu"}),s("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(n.name))])]),s("aside-item",{attrs:{itemMenu:n.children}})],2)],1)}),0)},ce=[];const le={name:"AsideItem",props:{itemMenu:{type:Array,default:()=>[]}},data(){return{routesMenu:[]}},mounted(){this.init()},methods:{init(){this.itemMenu.length==0?(this.routesMenu=this.$store.state.aside.menu,this.routesMenu=this.routesMenu.filter(e=>{var t;return!!(((t=this.$store.state.user.userInfo.power)==null?void 0:t.includes(e.name))||e.name=="\u9996\u9875")})):(this.routesMenu=this.itemMenu,this.routesMenu=this.routesMenu.filter(e=>{var t;return!!((t=this.$store.state.user.userInfo.power)==null?void 0:t.includes(e.name))}))},chooseMenu(e){this.$store.commit("aside/setActiveMenu",e)}}},R={};var ue=c(le,ae,ce,!1,me,"cefd3fd8",null,null);function me(e){for(let t in R)this[t]=R[t]}var de=function(){return ue.exports}(),he=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"aside"},[s("el-aside",{staticClass:"main",attrs:{width:"100%"}},[s("el-menu",{staticClass:"menu",attrs:{"default-active":e.defaultActive(),collapse:e.collapse(),router:!0},on:{open:e.handleOpen}},[s("aside-item")],1)],1)],1)},_e=[];const pe={name:"Aside",components:{AsideItem:de},data(){return{}},mounted(){},methods:{handleOpen(e,t){console.log(e,t)},handleClose(e,t){console.log(e,t)},defaultActive(){return this.$store.state.aside.activeMenu},collapse(){return this.$store.state.aside.asideClose}}},L={};var fe=c(pe,he,_e,!1,ve,"1232e348",null,null);function ve(e){for(let t in L)this[t]=L[t]}var ge=function(){return fe.exports}();var be=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"sys-msg"},[s("div",{ref:"xterm",attrs:{id:"xterm"}})])},$e=[];const ye={name:"SysMsg",data(){return{term:null,fitAddon:null,sshState:!1,historyCmd:[],historyIndex:0,temCmdStr:[],temCmdIndex:0,symbol:"$ > ",ins:0}},computed:{pipAfter(){return this.temCmdStr.slice(this.temCmdIndex)}},mounted(){this.initTerm()},beforeDestroy(){this.socket.term.close(),this.term&&this.term.dispose()},methods:{initTerm(){const e=new W.exports.Terminal({cursorBlink:!0,cursorStyle:"bar",scrollback:100});this.term=e;const t=new X.exports.FitAddon;this.term.loadAddon(t),this.fitAddon=t,e.open(this.$refs.xterm),e.focus(),this.term.onData(s=>{this.sshState?this.$socket.term.emit("res",s):this.keyInput(s)}),this.initGreet()},initGreet(){this.term.write("*** \uFF08^0^\uFF09 ***"),this.keyEnter()},keyInput(e){if(e.includes(";"))return console.log("\u6682\u65F6\u4E0D\u652F\u6301\u7EC4\u5408\u952E"),!1;if(e==="\r")this.keyEnter();else if(e==="\x7F")this.keyBackspace();else if(e==="[A")this.keyUp();else if(e==="[B")this.keyDown();else if(e==="[C")this.keyRight();else if(e==="[D")this.keyLeft();else{let t=[],s=[];this.pipAfter.forEach(i=>{t.push(i),s.push("\b")});const n=e+t.join("")+s.join("");this.term.write(n),this.temCmdStr.splice(this.temCmdIndex,this.ins,e),this.temCmdIndex++}},keyEnter(){this.cmd(this.temCmdStr.join("")),this.term.writeln(""),this.term.write(this.symbol),this.historyCmd.push(this.temCmdStr),this.historyIndex++,this.temCmdStr=[],this.temCmdIndex=0},keyBackspace(){if(this.temCmdIndex===0)return!1;let e=[],t=[];this.pipAfter.forEach(n=>{e.push(n),t.push("\b")});const s="\b"+e.join("")+" \b"+t.join("");this.term.write(s),this.temCmdIndex--,this.temCmdStr.splice(this.temCmdIndex,this.ins+1)},keyUp(){this.historyIndex!==0&&this.historyIndex--,this.term.write(this.historyCmd[this.historyIndex].join(""))},keyDown(){this.historyIndex<this.historyCmd.length&&this.historyIndex++,this.term.write(this.historyCmd[this.historyIndex].join(""))},keyRight(){if(this.temCmdIndex>=this.temCmdStr.length)return!1;this.temCmdIndex++,this.term.write("[C")},keyLeft(){if(this.temCmdIndex<=0)return!1;this.temCmdIndex--,this.term.write("[D")},getColsAndRows(e){return e=e||document.getElementById("xterm"),{rows:parseInt((e.clientHeight-0)/18),cols:10}},resizeTerm(){this.fitAddon.fit(),this.term.scrollToBottom()},cmd(e){console.log(e)}},sockets:{term:{res(e){this.term.write(e.toString())}}}},O={};var Ce=c(ye,be,$e,!1,ke,"4d25955e",null,null);function ke(e){for(let t in O)this[t]=O[t]}var Me=function(){return Ce.exports}(),we=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"user-msg"},[s("div",{staticClass:"msg-list"},e._l(e.userList,function(n,i){return s("div",{key:i,staticClass:"list-item",class:e.chooseIndex===i?"item-choose":"",on:{click:function(o){return e.chooseItem(n,i)}}},[s("div",{staticClass:"item-img"},[e._v(e._s(n.img))]),s("div",{staticClass:"item-content"},[s("div",{staticClass:"title"},[s("div",{staticClass:"title-name"},[e._v(e._s(n.name))]),s("div",{staticClass:"title-time"},[e._v(e._s(n.time))])]),s("div",{staticClass:"info"},[s("div",{staticClass:"info-content"},[e._v(e._s(n.content))]),s("div",{staticClass:"info-num"},[e._v(e._s(n.num))])])])])}),0),e._m(0)])},xe=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"msg-main"},[s("div",{staticClass:"main-content"}),s("div",{staticClass:"main-input"})])}];const Ie={data(){return{userList:[{img:"url",name:"test",time:"2021-10-23",content:"test",num:5,userId:1e4},{img:"url",name:"test",time:"2021-10-23",content:"test",num:5,userId:1e4},{img:"url",name:"test",time:"2021-10-23",content:"test",num:5,userId:1e4},{img:"url",name:"test",time:"2021-10-23",content:"test",num:5,userId:1e4},{img:"url",name:"test",time:"2021-10-23",content:"test",num:5,userId:1e4},{img:"url",name:"test",time:"2021-10-23",content:"test",num:5,userId:1e4},{img:"url",name:"test",time:"2021-10-23",content:"test",num:5,userId:1e4},{img:"url",name:"test",time:"2021-10-23",content:"test",num:5,userId:1e4},{img:"url",name:"test",time:"2021-10-23",content:"test",num:5,userId:1e4},{img:"url",name:"test",time:"2021-10-23",content:"test",num:5,userId:1e4},{img:"url",name:"test",time:"2021-10-23",content:"test",num:5,userId:1e4}],chooseIndex:""}},methods:{chooseItem(e,t){this.chooseIndex=t}}},j={};var Ee=c(Ie,we,xe,!1,Se,"9c2bf6d2",null,null);function Se(e){for(let t in j)this[t]=j[t]}var Ae=function(){return Ee.exports}(),Re=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div")},Le=[];const Oe={},D={};var je=c(Oe,Re,Le,!1,De,null,null,null);function De(e){for(let t in D)this[t]=D[t]}var Te=function(){return je.exports}(),Fe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div")},Ne=[];const Ve={},T={};var Pe=c(Ve,Fe,Ne,!1,Ge,null,null,null);function Ge(e){for(let t in T)this[t]=T[t]}var Ue=function(){return Pe.exports}(),Be=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-dialog",e._g(e._b({attrs:{title:"\u6D88\u606F\u63A7\u5236\u53F0",width:"80%",top:"5vh","close-on-click-modal":!1}},"el-dialog",e.$attrs,!1),e.$listeners),[s("div",{staticClass:"message-content"},[s("el-tabs",{attrs:{stretch:!0}},[s("el-tab-pane",[s("span",{attrs:{slot:"label"},slot:"label"},[s("i",{staticClass:"el-icon-cpu"}),e._v("\u7CFB\u7EDF")]),s("SysMsg")],1),s("el-tab-pane",[s("span",{attrs:{slot:"label"},slot:"label"},[s("i",{staticClass:"el-icon-user"}),e._v("\u7528\u6237")]),s("UserMsg")],1),s("el-tab-pane",[s("span",{attrs:{slot:"label"},slot:"label"},[s("i",{staticClass:"el-icon-bell"}),e._v("\u901A\u77E5")]),s("NoticeMsg")],1),s("el-tab-pane",[s("span",{attrs:{slot:"label"},slot:"label"},[s("i",{staticClass:"el-icon-connection"}),e._v("\u804A\u5929\u5BA4")]),s("RoomMsg")],1)],1)],1)])},qe=[];const He={components:{SysMsg:Me,UserMsg:Ae,NoticeMsg:Te,RoomMsg:Ue},data(){return{}},mounted(){},methods:{}},F={};var ze=c(He,Be,qe,!1,Ke,"d3bf8108",null,null);function Ke(e){for(let t in F)this[t]=F[t]}var We=function(){return ze.exports}(),Xe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"header"},[s("el-header",{staticClass:"main"},[s("i",{class:e.collapse()?"el-icon-s-unfold":"el-icon-s-fold",on:{click:e.setOpen}}),s("el-breadcrumb",{staticClass:"breadcrumb",attrs:{separator:"/"}},[s("el-breadcrumb-item",{attrs:{to:"/"}},[e._v("\u9996\u9875")]),e._l(e.matched,function(n){return s("el-breadcrumb-item",{key:n.path,attrs:{to:n.path}},[e._v(e._s(n.name))])})],2),s("div",{staticClass:"main-left"},[s("el-badge",{staticClass:"left-msg",attrs:{hidden:!e.msgNum||e.msgVisible,value:e.msgNum,max:99}},[s("i",{staticClass:"msg-icon",class:e.msgNum?"el-icon-chat-line-round":"el-icon-chat-round",on:{click:e.msgOpen}})]),s("el-dropdown",{staticClass:"left-dropdown",on:{command:e.headMenu}},[s("span",{staticClass:"dropdown-head"},[s("el-avatar",{attrs:{shape:"square",size:36}},[e._v(" user ")]),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})],1),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.option,function(n,i){return s("el-dropdown-item",{key:i,attrs:{command:n.value}},[e._v(e._s(n.lable))])}),1)],1)],1)],1),s("Message",{staticClass:"messge-dialog",attrs:{visible:e.msgVisible},on:{"update:visible":function(n){e.msgVisible=n}}})],1)},Je=[];const Ye={name:"Header",components:{Message:We},data(){return{matched:[],option:[{value:-1,lable:"\u767B\u51FA"},{value:1,lable:"\u4E2A\u4EBA\u4E2D\u5FC3"}],msgNum:0,msgVisible:!1,msgArr:[]}},mounted(){this.init()},watch:{$route(){this.routeChange()}},sockets:{msg:{res(e){this.debug.socket&&console.log("res",e.dataInfo)},"233"(e){this.debug.socket&&console.log("233",e),this.$msgTip("success",e)},"250"(e){this.debug.socket&&console.log("250",e),this.$msgTip("error",e,0)},reconnect(){this.debug.socket&&console.log("reconnect \u91CD\u65B0\u8FDE\u63A5"),this.sokcet("msg","init")},disconnect(){this.debug.socket&&console.log("\u65AD\u5F00\u8FDE\u63A5")}}},methods:{init(){this.sokcet("msg","init"),this.routeChange()},routeChange(){this.matched=this.$route.matched.filter(e=>e.name!="\u9996\u9875")},setOpen(){this.$store.commit("aside/setOpen",!this.$store.state.aside.asideClose)},collapse(){return this.$store.state.aside.asideClose},msgOpen(){this.msgVisible=!0},headMenu(e){switch(e){case-1:localStorage.removeItem("token"),this.$router.replace("/login"),this.$message.success("\u9000\u51FA\u6210\u529F");break;case 1:this.$message.success("\u4E2A\u4EBA\u4E2D\u5FC3");break;default:console.warn("[header] \u610F\u5916\u7684\u547D\u4EE4");break}}}},N={};var Qe=c(Ye,Xe,Je,!1,Ze,"0fb9e061",null,null);function Ze(e){for(let t in N)this[t]=N[t]}var et=function(){return Qe.exports}(),tt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"footer-main"},[s("div",{staticClass:"main-copyright row"},[e._v("Copyright \xA9 2019-"+e._s(new Date().getFullYear())+" \u5B59\u542F\u840C \u7248\u6743\u6240\u6709")]),s("div",{staticClass:"main-record row",on:{click:e.go}},[e._v("\u9102ICP\u590719018246\u53F7-1")])])},st=[];const nt={name:"Footer",mounted(){},methods:{go(){window.open("https://beian.miit.gov.cn")}}},V={};var it=c(nt,tt,st,!1,ot,"1ac719bb",null,null);function ot(e){for(let t in V)this[t]=V[t]}var rt=function(){return it.exports}(),at=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"Layout"},[s("el-container",[s("l-aside"),s("el-container",{staticClass:"container",attrs:{direction:"vertical"}},[s("l-header"),s("el-main",[s("transition",{attrs:{name:"fade",mode:"out-in"}},[s("keep-alive",[s("router-view",{staticClass:"view"})],1)],1),s("l-footer")],1)],1)],1)],1)},ct=[];const lt={name:"Layout",components:{"l-aside":ge,"l-header":et,"l-footer":rt},watch:{$route:function(e,t){const s=e.path.split("/").length,n=t.path.split("/").length;this.transition=s<n?"slide-right":"slide-left"}}},P={};var ut=c(lt,at,ct,!1,mt,"1241b7de",null,null);function mt(e){for(let t in P)this[t]=P[t]}var v=function(){return ut.exports}();u.use(f);const dt=f.prototype.push;f.prototype.push=function(t){return dt.call(this,t).catch(s=>s)};const ht=[{path:"/login",name:"login",show:!1,component:()=>m(()=>import("./login.db06ea25.js"),["assets/login.db06ea25.js","assets/login.74a05956.css","assets/Form.afd479a7.js","assets/Form.c7434f52.css","assets/request.584ece3f.js","assets/vendor.aabb9fcb.js"])},{path:"/404",name:"404",show:!1,component:()=>m(()=>import("./404.0f0b7c28.js"),["assets/404.0f0b7c28.js","assets/vendor.aabb9fcb.js"])}],_t=[{path:"",name:"\u9996\u9875",icon:"el-icon-s-home",component:v,redirect:"/dashboard",children:[{path:"dashboard",name:"\u9996\u9875",icon:"el-icon-s-home",component:()=>m(()=>import("./dashboard.870d7791.js"),["assets/dashboard.870d7791.js","assets/dashboard.8f733ca2.css","assets/vendor.aabb9fcb.js","assets/blog.4bcf3a8d.js","assets/request.584ece3f.js"])}]},{path:"/application",name:"\u5E94\u7528",icon:"el-icon-menu",component:v,redirect:"/application/appList",children:[{path:"appList",name:"\u5E94\u7528\u5217\u8868",icon:"el-icon-help",component:()=>m(()=>import("./appList.0b55b171.js"),["assets/appList.0b55b171.js","assets/appList.8d8b00e2.css","assets/vendor.aabb9fcb.js"])},{path:"apiDoc",name:"\u63A5\u53E3\u6587\u6863",icon:"el-icon-document",component:()=>m(()=>import("./apiDoc.b1a55205.js"),["assets/apiDoc.b1a55205.js","assets/apiDoc.feae0fa3.css","assets/app.565b12f3.js","assets/request.584ece3f.js","assets/vendor.aabb9fcb.js"])},{path:"networkDisk",name:"\u7F51\u76D8",icon:"el-icon-upload",component:()=>m(()=>import("./networkDisk.2c6f1989.js"),["assets/networkDisk.2c6f1989.js","assets/networkDisk.dea14ed4.css","assets/app.565b12f3.js","assets/request.584ece3f.js","assets/vendor.aabb9fcb.js"])}]},{path:"/manage",name:"\u7BA1\u7406",icon:"el-icon-setting",component:v,redirect:"/manage/blog",children:[{path:"blog",name:"\u535A\u5BA2\u7BA1\u7406",icon:"el-icon-notebook-1",component:()=>m(()=>import("./blog.cd487894.js"),["assets/blog.cd487894.js","assets/blog.2bd2cc93.css","assets/blog.4bcf3a8d.js","assets/request.584ece3f.js","assets/vendor.aabb9fcb.js","assets/TableFormat.b3803652.js","assets/TableFormat.731b0bcc.css"])},{path:"user",name:"\u7528\u6237\u7BA1\u7406",icon:"el-icon-user",component:()=>m(()=>import("./user.0eba2da4.js"),["assets/user.0eba2da4.js","assets/user.cdb86183.css","assets/Form.afd479a7.js","assets/Form.c7434f52.css","assets/request.584ece3f.js","assets/vendor.aabb9fcb.js","assets/TableFormat.b3803652.js","assets/TableFormat.731b0bcc.css"])}]}],pt=[{path:"/edit",name:"\u7F16\u8F91",show:!1,component:v,redirect:"/manage/blog",children:[{path:":id",name:"\u535A\u5BA2\u7F16\u8F91",component:()=>m(()=>import("./edit.16a446f6.js"),["assets/edit.16a446f6.js","assets/edit.a924345a.css","assets/vendor.aabb9fcb.js","assets/blog.4bcf3a8d.js","assets/request.584ece3f.js"])}]},{path:"/*",name:"404",show:!1,redirect:"/404"}],ft=["login","404","\u535A\u5BA2\u7F16\u8F91"],p=new f({mode:"hash",routes:[...ht,..._t,...pt],whiteList:ft});function G(e){for(let t=0;t<e.length;t++)if(typeof e[t].children!="undefined"){for(let s=0;s<e[t].children.length;s++)e[t].children[s].path=e[t].path+"/"+e[t].children[s].path;e[t].children=G(e[t].children)}return e}let $=p.options.routes.filter(e=>e.show!=!1);$=G($);var vt={namespaced:!0,state:{asideClose:!0,activeMenu:"",menu:$},mutations:{setOpen(e,t){e.asideClose=t},setActiveMenu(e,t){e.activeMenu=t},setMenu(e,t){e.menu=t}},actions:{}},gt={namespaced:!0,state:{userInfo:{},isAdmin:!1},mutations:{setUserInfo(e,t){e.userInfo=t,t.power&&t.power.includes("\u7528\u6237\u7BA1\u7406")?e.isAdmin=!0:e.isAdmin=!1}},actions:{}},bt={namespaced:!0,state:{debug:{socket:!1}},mutations:{setDebugSocket(e,t){e.debug.socket=t}},actions:{}},$t={namespaced:!0,state:{},mutations:{MSG_RES(e,t){},MSG_200(e,t){},MSG_233(e,t){},MSG_250(e,t){}},actions:{MSG_RES(e,t){},MSG_CONNECT(e,t){console.log("MSG_CONNECT",t)},MSG_200(e,t){},MSG_233(e,t){},MSG_250(e,t){}}};u.use(E);var h=new E.Store({state:{},mutations:{},actions:{},modules:{aside:vt,user:gt,app:bt,socket:$t}});p.beforeEach((e,t,s)=>{h.commit("aside/setActiveMenu",e.path);let n=localStorage.getItem("token"),i=JSON.parse(localStorage.getItem("userInfo"));n&&i?e.path==="/login"?(s({path:"/"}),b.exports.Message.warning("\u5DF2\u7ECF\u767B\u5F55")):(h.commit("user/setUserInfo",i),s()):e.path!=="/login"?(b.exports.Message.warning("\u672A\u767B\u5F55\u72B6\u6001"),s({path:"/login"})):s()});p.beforeEach((e,t,s)=>{let n=h.state.user.userInfo.power;if(p.options.whiteList.includes(e.name)||n&&n.includes(e.name)||e.name=="\u9996\u9875")return s(),!0;s("/dashboard")});class yt{constructor({vuex:t,options:s}){this.vuex=t,this.options=s}install(t){t.mixin(this.connect(t,this.options)),this.emitter=new Ct(this.vuex,this.options),new y(this.io,this.emitter)}connect(t,s){if(!s.length)return console.error("\u914D\u7F6E\u9879\u9519\u8BEF"),!1;let n={},i=this.io=t.prototype.$socket={};return t.prototype.$MadderSocket=this,s.forEach(o=>{console.log(o.ip),i[o.name]=io(o.ip);//! socket.io从一开始注册的时候其实就连接了
n[o.name]={}}),{beforeCreate(){this.sockets||(this.sockets=n),Object.keys(this.sockets).forEach(o=>{this.sockets[o].subscribe=(r,_)=>{this.$MadderSocket.emitter.addListener(r,_,this)},this.sockets[o].unsubscribe=r=>{this.$MadderSocket.emitter.removeListener(r,this)}})},mounted(){Object.keys(this.sockets).forEach(o=>{this.$options.sockets&&this.$options.sockets[o]&&Object.keys(this.$options.sockets[o]).forEach(r=>{r!=="subscribe"&&r!=="unsubscribe"&&this.$MadderSocket.emitter.addListener(o,r,this)})})},beforeDestroy(){Object.keys(this.sockets).forEach(o=>{this.$options.sockets&&this.$options.sockets[o]&&Object.keys(this.$options.sockets[o]).forEach(r=>{this.$MadderSocket.emitter.removeListener(o,r,this);//! 这里直接销毁了没有断开事件了
})})}}}}class Ct{constructor(t){this.store=t,this.listeners=new Map}addListener(t,s,n){if(typeof n.$options.sockets[t][s]=="function")this.listeners.has(t)||this.listeners.set(t,new Map),this.listeners.get(t).has(s)||this.listeners.get(t).set(s,[]),this.listeners.get(t).get(s).push({callback:n.$options.sockets[t][s],component:n});else throw new Error("callback must be a function")}removeListener(t,s,n){if(this.listeners.get(t).has(s)){const i=this.listeners.get(t).get(s).filter(o=>o.component!==n);i.length>0?this.listeners.get(t).set(s,i):this.listeners.get(t).delete(s)}}emit(t,s,n){if(!this.listeners.get(n))return!1;this.listeners.get(n).has(t)&&this.listeners.get(n).get(t).forEach(i=>{i.callback.call(i.component,s)}),t!=="ping"&&t!=="pong"&&this.dispatchStore(t,s,n)}dispatchStore(t,s,n){if(this.store&&this.store._actions){let i=t;n&&(i=(n+"_"+t).toUpperCase());for(let o in this.store._actions)o.split("/").pop()===i&&this.store.dispatch(o,s);for(let o in this.store._mutations)o.split("/").pop()===i&&this.store.commit(o,s)}}}const C=class{constructor(t,s){this.io=t,this.register(),this.emitter=s}register(){Object.keys(this.io).forEach(t=>{this.io[t].onevent=s=>{let[n,...i]=s.data;i.length===1&&(i=i[0]),this.onEvent(n,i,s.nsp.split("/").pop())},C.staticEvents.forEach(s=>this.io[t].on(s,n=>this.onEvent(s,n,t)))})}onEvent(t,s,n){this.emitter.emit(t,s,n)}};let y=C;I(y,"staticEvents",["connect","error","disconnect","reconnect","reconnect_attempt","reconnecting","reconnect_error","reconnect_failed","connect_error","connect_timeout","connecting","ping","pong"]);var kt={computed:x({},J("app",["debug"])),methods:{sokcet(e,t="init",s={}){const n={name:this.$store.state.user.userInfo.username,time:new Date().getTime(),userId:this.$store.state.user.userInfo.id};Object.assign(n,s),this.$socket[e].emit(t,n)}}},Mt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"main",on:{click:function(n){e.visiable?e.close():e.open()}}},[s("h2",{staticClass:"msg-title"},[s("span",[e._v(e._s(e.title)+"\xA0")]),s("i",{class:e.visiable?"el-icon-caret-top":"el-icon-caret-bottom"})]),e.visiable?s("div",{staticClass:"msg-list"},e._l(e.map,function(n,i){return s("div",{key:i,staticClass:"list-item"},[e._v(e._s(n[0])+":"+e._s(n[1]))])}),0):e._e()])},wt=[];const xt={name:"MsgDetail",props:{title:{type:String,default:""},msgMap:{type:Object,default:()=>{}},dataInfo:{type:Object,default:()=>{}}},data(){return{map:[],visiable:!1}},mounted(){this.map=new Map,Object.keys(this.msgMap).map(t=>{this.map.set(this.msgMap[t],this.dataInfo[t])})},methods:{open(){this.visiable=!0},close(){this.visiable=!1}}},U={};var It=c(xt,Mt,wt,!1,Et,"2d259599",null,null);function Et(e){for(let t in U)this[t]=U[t]}var St=function(){return It.exports}();const At=new u,Rt=At.$createElement;function Lt(e,t,s=15e3){b.exports.Notification({type:e,message:Rt(St,{props:{title:t.msg,msgMap:t.msgMap,dataInfo:t.dataInfo}}),duration:s,position:"bottom-right"})}u.use(Y);u.use(new yt({vuex:h,options:[{name:"msg",ip:"http://api.sunqm.com/msg"},{name:"chat",ip:"http://api.sunqm.com/chat"},{name:"term",ip:"http://api.sunqm.com/term"}]}));u.mixin(kt);u.config.productionTip=!1;u.prototype.$msgTip=Lt;const Ot=new u({router:p,store:h,render:e=>e(ie)}).$mount("#app");window.$debug=Ot,h.commit("app/setDebugSocket",!0);export{c as n,p as r};
